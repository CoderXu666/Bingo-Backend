server:
  port: 8081
  servlet:
    context-path: /bingo

spring:
  application:
    name: bingo-community
  # 后来发现的bean会覆盖之前相同名称的bean
  # A bean with that name has already been defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class] and overriding is disabled.
  main:
    allow-bean-definition-overriding: true
  # Nacos注册、配置
  cloud:
    nacos:
      discovery:
        server-addr: 120.53.242.235:8848
        namespace: 993d6d11-4ad2-4a81-97c0-03db20ee88b7
      config:
        server-addr: 120.53.242.235:8848
        namespace: 993d6d11-4ad2-4a81-97c0-03db20ee88b7
        file-extension: yml
        shared-configs:
          - data-id: bingo_mysql.yml
          - data-id: bingo_redis.yml

  # sharding-jdbc
  shardingsphere:
    # 数据源
    datasource:
      names: bingo
      bingo:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.jdbc.Driver
        url: jdbc:mysql://120.53.242.235:3306/bingo?serverTimezone=GMT%2B8&useUnicode=true&characterEncoding=UTF-8&useSSL=false
        username: root
        password: root
    # 配置
    sharding:
      tables:
        bingo_post:
          actual-data-nodes: bingo.bingo_post_${0..2}
          table-strategy:
            inline:
              sharding-column: id
              algorithm-expression: bingo_post_${id.longValue() % 3}
    # 打印SQL日志
    props:
      sql:
        show: true


# MyBatis-Plus
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    map-underscore-to-camel-case: true

